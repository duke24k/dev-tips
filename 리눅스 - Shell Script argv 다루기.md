# Shell Script의 argv 다루기

시간을 나타내는 문자열 여러 개를 인자로 받아서 반복문을 돌리는 간단한 스크립트가 필요하다.

## 인자에 공백이 없는 경우

공백이 없으면 간단하다. `$@`를 사용하면 된다.

```
#!/bin/sh

for date in $@
do
    echo $date
done
```

실행해 보면,

```
./my_script.sh '2017122404'  '2017122405'  '2017122406'
2017122404
2017122405
2017122406
```

원하는대로 잘 나온다.

## 인자에 공백이 있는 경우

하지만 `2017-12-24 04:00:00`, `2017-12-24 05:00:00`, `2017-12-24 06:00:00`와 같이 인자에 공백이 포함되어 있으면, 아래와 같이 원하는대로 나오지 않는다. 즉, 인자에 공백이 있으면 `$@`는 원하는대로 동작하지 않는다.

```
./my_script.sh '2017-12-24 04:00:00'  '2017-12-24 05:00:00'  '2017-12-24 06:00:00'
2017-12-24
04:00:00
2017-12-24
05:00:00
2017-12-24
06:00:00
```

이럴 땐 아래와 같이 `$#`와 인덱스, `${!i}`를 이용해서 아래와 같이 작성하면 된다.

```
#!/bin/sh

len=$#

for ((i=1; i <= len; i+))
do
    echo ${!i}
done
```

그러면 아래와 같이 잘 나온다.

```
./my_script.sh '2017-12-24 04:00:00'  '2017-12-24 05:00:00'  '2017-12-24 06:00:00'
2017-12-24 04:00:00
2017-12-24 05:00:00
2017-12-24 06:00:00
```

하지만 아래와 같이 공백이 있는 인자를 `${!i}`로 받아서 다른 명령에 넘겨줄 때는 `""`로 감싸줘야 공백이 splitter로 작동하지 않고, 최종적으로 원하는대로 동작한다.

```
#!/bin/sh

len=$#

for ((i=1; i <= len; i+))
do
    echo ${!i}
    ./other_script.sh "${!i}"
done
```

